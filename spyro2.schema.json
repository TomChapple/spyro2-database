{
    "definitions": {
        "IETFLanguageTag": {
            "type": "string",
            "description": "An [IETF language tag](https://en.wikipedia.org/wiki/IETF_language_tag) identifying a human language. The regex for this tag was defined by [\"porges\" on StackOverflow](https://stackoverflow.com/questions/7035825/regular-expression-for-a-language-tag-as-defined-by-bcp47/7036171#7036171)",
            "pattern": "^(((en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))|((([A-Za-z]{2,3}(-([A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-([A-Za-z]{4}))?(-([A-Za-z]{2}|[0-9]{3}))?(-([A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-([0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(x(-[A-Za-z0-9]{1,8})+))?)|(x(-[A-Za-z0-9]{1,8})+))$",
            "examples": ["en-us", "en-gb", "fr", "ja"]
        },
        "Locale": {
            "type": "object",
            "description": "A language that is present on this game. If a language is present, all instances of LocalisedText should contain a key matching its \"id\" value.",
            "properties": {
                "id": {
                    "$ref": "#/definitions/IETFLanguageTag"
                },
                "name": {
                    "$ref": "#/definitions/DescriptiveText"
                }
            },
            "required": ["id", "name"]
        },
        "LocalisedText": {
            "type": "object",
            "description": "In-game text that varies depending on the locale the game is in. This can vary on game version or, in the case of the PAL version, the language chosen at the title screen.",
            "propertyNames": {
                "$ref": "#/definitions/IETFLanguageTag"
            },
            "additionalProperties": {
                "type": "string"
            },
            "examples": [
                {
                    "en-gb": "Glimmer",
                    "fr": "Lueur"
                }
            ]
        },
        "DescriptiveText": {
            "type": "string",
            "description": "Text defined within the context of this database"
        },
        "Reference": {
            "type": "string",
            "description": "An absolute path to an object as a JSON Pointer (RFC 6901). This serves as an identifier within the document.",
            "pattern": "^(\\/([^~/]|(~[01]))*)*$"
        },
        "Level": {
            "type": "object",
            "description": "A playable, in-game area where Spyro can be controlled.",
            "properties": {
                "kind": {
                    "type": "string",
                    "description": "The category of level this is associated with. Additional properties may be required depending on the category."
                },
                "name": {
                    "$ref": "#/definitions/LocalisedText"
                },
                "npcs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/NPC"
                    }
                }
            }
        },
        "HomeworldContained": {
            "type": "object",
            "description": "This extension is used for levels that are contained within a homeworld and contains a reference to that homeworld.",
            "properties": {
                "homeworld": { "$ref": "#/definitions/Reference" }
            },
            "required": ["homeworld"]
        },
        "HomeworldLevel": {
            "allOf": [
                { "$ref": "#/definitions/Level" },
                {
                    "type": "object",
                    "properties": {
                        "kind": {
                            "const": "homeworld"
                        }
                    },
                    "required": ["kind"]
                }
            ],
            "description": "A hub level with multiple portals to other levels. These tend to be considered the worlds of the game."
        },
        "RealmLevel": {
            "allOf": [
                { "$ref": "#/definitions/Level" },
                { "$ref": "#/definitions/HomeworldContained" },
                {
                    "type": "object",
                    "properties": {
                        "kind": {
                            "const": "realm"
                        }
                    },
                    "required": ["kind"]
                }
            ],
            "description": "A level with a goal to reach that end and receive a reward. These levels are owned by a homeworld and tend to have a portal at the end to return to it."
        },
        "SpeedwayLevel": {
            "allOf": [
                { "$ref": "#/definitions/Level" },
                { "$ref": "#/definitions/HomeworldContained" },
                {
                    "type": "object",
                    "properties": {
                        "kind": {
                            "const": "speedway"
                        },
                        "targets": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "name": { "$ref": "#/definitions/LocalisedText" },
                                    "count": {
                                        "type": "integer",
                                        "description": "The number of targets that must be answered to complete this task."
                                    },
                                    "bonusTime": {
                                        "type": "number",
                                        "description": "A bonus amount of time, in seconds, that is granted when an instance of this target is answered. This is only awarded before the speedway has been completed for the first time."
                                    }
                                }
                            },
                            "minItems": 4,
                            "maxItems": 4
                        },
                        "timeLimit": {
                            "type": "number",
                            "description": "The time limit that is imposed on players before the speedway has been completed the first time. The time listed in seconds, but milliseconds can be specified via decimal points."
                        }
                    },
                    "required": ["kind", "targets", "timeLimit"]
                }
            ],
            "description": "A challenge level that requires a number of tasks to be completed within a time limit."
        },
        "BossLevel": {
            "allOf": [
                { "$ref": "#/definitions/Level" },
                { "$ref": "#/definitions/HomeworldContained" },
                {
                    "type": "object",
                    "properties": {
                        "kind": {
                            "const": "boss"
                        },
                        "boss": { "$ref": "#/definitions/Reference" }
                    },
                    "required": ["kind", "boss"]
                }
            ]
        },
        "NPC": {
            "type": "object",
            "description": "A computer-controlled character that move around the world including enemies and allies. NPCs that have dialogue are considered \"interactive\".",
            "properties": {
                "name": {
                    "$ref": "#/definitions/LocalisedText"
                },
                "dialogues": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Dialogue"
                    }
                },
                "location": {
                    "$ref": "#/definitions/Location"
                }
            },
            "required": [
                "name"
            ]
        },
        "Dialogue": {
            "type": "object",
            "description": "A conversation that Spyro can have with an NPC that can include dialogue options and multiple pages.",
            "properties": {
                "pages": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/LocalisedText"
                    }
                }
            },
            "required": ["pages"]
        },
        "Location": {
            "$ref": "#/definitions/DescriptiveText",
            "description": "Where this entity is located within the Level."
        }
    },
    "type": "object",
    "properties": {
        "locales": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/Locale"
            }
        },
        "levels": {
            "type": "array",
            "items": {
                "anyOf": [
                    { "$ref": "#/definitions/RealmLevel"},
                    { "$ref": "#/definitions/HomeworldLevel" },
                    { "$ref": "#/definitions/SpeedwayLevel" },
                    { "$ref": "#/definitions/BossLevel" }
                ]
            }
        }
    }
}